<server description="Sample Liberty server">

    <featureManager>
        <feature>microProfile-2.2</feature>
        <feature>jpa-2.2</feature>
        <feature>mpJwt-1.1</feature>
    </featureManager>

    <httpEndpoint httpPort="${default.http.port}" httpsPort="${default.https.port}"
                  id="defaultHttpEndpoint" host="*"/>

    <quickStartSecurity userName="admin" userPassword="password"/>
    
    <application name="RealWorld" location="${appLocation}" type="war" context-root="/">
        <application-bnd>
            <security-role name="admin">
                <group name="myAdmins" />
            </security-role>
            <security-role name="user">
                <group name="myUsers" />
            </security-role>
        </application-bnd>
    </application>
      
    <!-- Derby Library Configuration -->
    <library id="derbyJDBCLib">
        <fileset dir="${shared.resource.dir}" includes="derby*.jar" />
    </library>

    <!-- Datasource Configuration -->
    <dataSource id="userjpadatasource" 
                jndiName="jdbc/derby">
        <jdbcDriver libraryRef="derbyJDBCLib" />
        <properties.derby.embedded databaseName="UserDB" createDatabase="create" />
    </dataSource>
    
    <!-- The MP JWT configuration that injects the caller's JWT into a ResourceScoped bean for inspection. -->
    <mpJwt id="jwtUserConsumer" keyName="default" audiences="simpleapp" issuer="localhost:9080"/>

</server>
